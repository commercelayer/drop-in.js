import { Canvas, Meta, Story, ArgsTable } from '@storybook/blocks'
import * as Stories from './cl-availability.stories.ts';
import { codes } from '../assets/constants'

<Meta of={Stories} />

# Availability message

Once you have correctly set up your organization in Commerce Layer and imported the drop-in library as described [here](?path=/docs/getting-started--docs), you can use the `cl-availability` component to display an availability message for your products (either available or out-of-stock) with localized delivery lead time and cost, as shown in the code snippets below.

This component is the owner of the availability information. It fetches the inventory of the specified SKU and dispatches it to the [**cl-availability-status**](?path=/docs/components-availability-cl-availability-status--docs) and [**cl-availability-info**](?path=/docs/components-availability-cl-availability-info--docs) children.

Please note that, if different delivery lead times are available, only the one associated with the lower shipping method cost is displayed.

<Canvas of={Stories.Basic} />

<ArgsTable story="Basic" />

The pre-filled code refers to an available product, try to change it with an out-of-stock (e.g. <code>{codes.outOfStock}</code>) and see how the component behaves in the example above.

{/* 
<div className="bg-blue-100 border-l-4 border-blue-500 text-blue-700 p-4" role="alert">
  <p className="!m-0 font-bold">Info</p>
  <p className="!m-0 ">The pre-filled code refers to an available product, try to change it with an out-of-stock (e.g. <code>{codes.outOfStock}</code>) and see how the component behaves in the example above.</p>
</div>
 */}

### No code

Any availability message is related to a product. That's why the `code` attribute is mandatory. If you don't set it, the component will be rendered as an empty box without any size, as shown in the example below:

<Canvas of={Stories.WithoutAttributes} />

## Events

The `cl-availability` component triggers the [**cl-skus-getsku**](?path=/docs/events--docs#cl-skus-getsku) custom event when an SKU is fetched.
