import { Canvas, Meta, Story, Controls, Source } from '@storybook/blocks'
import * as Stories from './cl-identity-link.stories.ts';
import { codes } from '../assets/constants.ts'
import { getSelectedScopeValue } from '../../.storybook/addon-scope-selector/constants'

<Meta of={Stories} />

# Identity

Any Commerce Layer account comes with a hosted version of the [open-source Identity application](https://github.com/commercelayer/mfe-identity) that is automatically enabled. It's a React-based, production-ready implementation that provides signup and login functionalities for a specific organization that developers can integrate with just a single URL link as explained in detail [here](https://github.com/commercelayer/mfe-identity#hosted-version).

Once you have [imported](?path=/docs/getting-started--docs) the drop-in library, you can use the `cl-identity-link` component as an in-place replacement for an `<a>` tag pointing to the signup or login URLs or performing the logout action, based on the value of the `type` attribute, which is required (if missing, the component will not be rendered). You also have the option to specify the `target`, as shown in the code snippet below.

<Canvas of={Stories.Basic} />

<Controls of={Stories.Basic} />

## Private market

When you associate a [customer group](https://docs.commercelayer.io/core/api-reference/customer_groups) to a market, that market becomes private and can be accessed only by the customers belonging to the group.

You can use customer groups to manage B2B customers, B2C loyalty programs, private sales, and more.

Here we've created a private market with a customer group associated with it. The `cl-identity-link` accepts a `scope` attribute that allows you to specify the market to be used for the login process.
The `scope` attribute is optional and, if omitted, the drop-in.js configuration scope will be used.

<Source language='html' dark code={`
<cl-identity-link
  type="login"
  target="_parent"
  scope="${getSelectedScopeValue()}-employees"
>
  Login
</cl-identity-link>
`} />

Here below you can try to login to a demo employee store using the following credentials:

email: <b className='pointer-events-none'>drop-in.js@commercelayer.io</b>  
password: <b>123456</b>

<Canvas sourceState="hidden" of={Stories.PrivateScope} />
