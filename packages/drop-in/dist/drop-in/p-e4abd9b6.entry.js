import{r as n,h as e,H as t,g as i}from"./p-34f2dea8.js";import{j as o,b as r,g as a,d as u,a as s,l as c,e as d}from"./p-e22d4299.js";async function l(){const n=await s(a()),e=await n.orders.create({});var t;return t=e.id,o.set(r(),t),await w(e),e}function f(){var n;return null!==(n=o.get(r()))&&void 0!==n?n:null}function m(n){const e=f();return null!==e&&n.includes(`/${e}?`)}async function h(n=!1){const e=a(),t=await u(e);let i=f();return null===i&&n&&(i=(await l()).id),`https://${e.slug}.commercelayer.app/cart/${null!=i?i:"null"}?accessToken=${t}`}async function w(n){n||(n=await async function(){const n=await s(a()),e=f();return null===e?null:await n.orders.retrieve(e).catch((()=>null))}()),null!==n&&window.dispatchEvent(new CustomEvent("cartUpdate",{detail:n}))}const g=class{constructor(e){n(this,e),this.quantity=1}logSku(n){this.validateSku(n)||c("warn",'"sku" should be a not empty string.',this.host)}logQuantity(n){this.validateQuantity(n)||c("warn",'"quantity" should be a number equal or greater than 0.',this.host)}validateSku(n){return"string"==typeof n&&""!==n}validateQuantity(n){return n>=0}watchSkuHandler(n,e){this.logSku(n)}watchQuantityHandler(n,e){this.validateQuantity(n)||(this.quantity=0)}componentWillLoad(){this.logSku(this.sku),this.logQuantity(this.quantity)}handleKeyPress(n){"Enter"!==n.key&&" "!==n.key||this.handleAddItem()}handleAddItem(){void 0!==this.sku&&this.canBeSold()&&async function(n,e){var t;const i=await s(a()),o=null!==(t=f())&&void 0!==t?t:await(await l()).id;await i.line_items.create({order:{id:o,type:"orders"},quantity:e,sku_code:n,_update_quantity:!0}),await w(null)}(this.sku,this.quantity).catch((n=>{throw n}))}canBeSold(){return this.validateSku(this.sku)&&this.quantity>0}render(){const n=this.canBeSold();return e(t,{role:"button",tabindex:"0","aria-disabled":n?void 0:"true",onKeyPress:n=>this.handleKeyPress(n),onClick:()=>this.handleAddItem()},e("slot",null))}get host(){return i(this)}static get watchers(){return{sku:["watchSkuHandler"],quantity:["watchQuantityHandler"]}}};var p=d((function(n){!function(e){if("undefined"!=typeof window){var t,i=0,o=!1,r=!1,a="message".length,u="[iFrameSizer]",s=u.length,c=null,d=window.requestAnimationFrame,l={max:1,scroll:1,bodyScroll:1,documentElementScroll:1},f={},m=null,h={autoResize:!0,bodyBackground:null,bodyMargin:null,bodyMarginV1:8,bodyPadding:null,checkOrigin:!0,inPageLinks:!1,enablePublicMethods:!0,heightCalculationMethod:"bodyOffset",id:"iFrameResizer",interval:32,log:!1,maxHeight:1/0,maxWidth:1/0,minHeight:0,minWidth:0,mouseEvents:!0,resizeFrom:"parent",scrolling:!1,sizeHeight:!0,sizeWidth:!1,warningTimeout:5e3,tolerance:0,widthCalculationMethod:"scroll",onClose:function(){return!0},onClosed:function(){},onInit:function(){},onMessage:function(){k("onMessage function not defined")},onMouseEnter:function(){},onMouseLeave:function(){},onResized:function(){},onScroll:function(){return!0}},w={};window.jQuery&&((t=window.jQuery).fn?t.fn.iFrameResize||(t.fn.iFrameResize=function(n){return this.filter("iframe").each((function(e,t){j(t,n)})).end()}):T("","Unable to bind to jQuery, it is not fully loaded.")),n.exports=D(),window.iFrameResize=window.iFrameResize||D()}function g(){return window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver}function p(n,e,t){n.addEventListener(e,t,!1)}function v(n,e,t){n.removeEventListener(e,t,!1)}function b(n){return f[n]?f[n].log:o}function y(n,e){I("log",n,e,b(n))}function T(n,e){I("info",n,e,b(n))}function k(n,e){I("warn",n,e,!0)}function I(n,e,t,i){!0===i&&"object"==typeof window.console&&console[n](function(n){return u+"["+function(n){var e="Host page: "+n;return window.top!==window.self&&(e=window.parentIFrame&&window.parentIFrame.getId?window.parentIFrame.getId()+": "+n:"Nested host page: "+n),e}(n)+"]"}(e),t)}function M(n){function e(){t("Height"),t("Width"),F((function(){C(P),x(W),h("onResized",P)}),P,"init")}function t(n){var e=Number(f[W]["max"+n]),t=Number(f[W]["min"+n]),i=n.toLowerCase(),o=Number(P[i]);y(W,"Checking "+i+" is in range "+t+"-"+e),o<t&&(o=t,y(W,"Set "+i+" to min value")),o>e&&(o=e,y(W,"Set "+i+" to max value")),P[i]=""+o}function i(n){return L.substr(L.indexOf(":")+a+n)}function o(n,e){var t,i;t=function(){var t,i;A("Send Page Info","pageInfo:"+(t=document.body.getBoundingClientRect(),i=P.iframe.getBoundingClientRect(),JSON.stringify({iframeHeight:i.height,iframeWidth:i.width,clientHeight:Math.max(document.documentElement.clientHeight,window.innerHeight||0),clientWidth:Math.max(document.documentElement.clientWidth,window.innerWidth||0),offsetTop:parseInt(i.top-t.top,10),offsetLeft:parseInt(i.left-t.left,10),scrollTop:window.pageYOffset,scrollLeft:window.pageXOffset,documentHeight:document.documentElement.clientHeight,documentWidth:document.documentElement.clientWidth,windowHeight:window.innerHeight,windowWidth:window.innerWidth})),n,e)},w[i=e]||(w[i]=setTimeout((function(){w[i]=null,t()}),32))}function r(n){var e=n.getBoundingClientRect();return N(W),{x:Math.floor(Number(e.left)+Number(c.x)),y:Math.floor(Number(e.top)+Number(c.y))}}function d(n){var e=n?r(P.iframe):{x:0,y:0},t={x:Number(P.width)+e.x,y:Number(P.height)+e.y};y(W,"Reposition requested from iFrame (offset x:"+e.x+" y:"+e.y+")"),window.top!==window.self?window.parentIFrame?window.parentIFrame["scrollTo"+(n?"Offset":"")](t.x,t.y):k(W,"Unable to scroll to requested position, window.parentIFrame not found"):(c=t,l(),y(W,"--"))}function l(){!1!==h("onScroll",c)?x(W):E()}function m(n){var e={};if(0===Number(P.width)&&0===Number(P.height)){var t=i(9).split(":");e={x:t[1],y:t[0]}}else e={x:P.width,y:P.height};h(n,{iframe:P.iframe,screenX:Number(e.x),screenY:Number(e.y),type:P.type})}function h(n,e){return S(W,n,e)}var g,b,I,M,z,j,L=n.data,P={},W=null;"[iFrameResizerChild]Ready"===L?function(){for(var n in f)A("iFrame requested init",H(n),f[n].iframe,n)}():u===(""+L).substr(0,s)&&L.substr(s).split(":")[0]in f?(M=(I=L.substr(s).split(":"))[1]?parseInt(I[1],10):0,z=f[I[0]]&&f[I[0]].iframe,j=getComputedStyle(z),P={iframe:z,id:I[0],height:M+function(n){return"border-box"!==n.boxSizing?0:(n.paddingTop?parseInt(n.paddingTop,10):0)+(n.paddingBottom?parseInt(n.paddingBottom,10):0)}(j)+function(n){return"border-box"!==n.boxSizing?0:(n.borderTopWidth?parseInt(n.borderTopWidth,10):0)+(n.borderBottomWidth?parseInt(n.borderBottomWidth,10):0)}(j),width:I[2],type:I[3]},f[W=P.id]&&(f[W].loaded=!0),(b=P.type in{true:1,false:1,undefined:1})&&y(W,"Ignoring init message from meta parent page"),!b&&function(n){var e=!0;return f[n]||(e=!1,k(P.type+" No settings for "+n+". Message was: "+L)),e}(W)&&(y(W,"Received: "+L),g=!0,null===P.iframe&&(k(W,"IFrame ("+P.id+") not found"),g=!1),g&&function(){var e,t=n.origin,i=f[W]&&f[W].checkOrigin;if(i&&""+t!="null"&&!(i.constructor===Array?function(){var n=0,e=!1;for(y(W,"Checking connection is from allowed list of origins: "+i);n<i.length;n++)if(i[n]===t){e=!0;break}return e}():(y(W,"Checking connection is from: "+(e=f[W]&&f[W].remoteHost)),t===e)))throw new Error("Unexpected message received from: "+t+" for "+P.iframe.id+". Message was: "+n.data+". This error can be disabled by setting the checkOrigin: false option or by providing of array of trusted domains.");return!0}()&&function(){switch(f[W]&&f[W].firstRun&&f[W]&&(f[W].firstRun=!1),P.type){case"close":O(P.iframe);break;case"message":s=i(6),y(W,"onMessage passed: {iframe: "+P.iframe.id+", message: "+s+"}"),h("onMessage",{iframe:P.iframe,message:JSON.parse(s)}),y(W,"--");break;case"mouseenter":m("onMouseEnter");break;case"mouseleave":m("onMouseLeave");break;case"autoResize":f[W].autoResize=JSON.parse(i(9));break;case"scrollTo":d(!1);break;case"scrollToOffset":d(!0);break;case"pageInfo":o(f[W]&&f[W].iframe,W),function(){function n(n,i){function r(){f[t]?o(f[t].iframe,t):e()}["scroll","resize"].forEach((function(e){y(t,n+e+" listener for sendPageInfo"),i(window,e,r)}))}function e(){n("Remove ",v)}var t=W;n("Add ",p),f[t]&&(f[t].stopPageInfo=e)}();break;case"pageInfoStop":f[W]&&f[W].stopPageInfo&&(f[W].stopPageInfo(),delete f[W].stopPageInfo);break;case"inPageLink":t=i(9).split("#")[1]||"",a=decodeURIComponent(t),(u=document.getElementById(a)||document.getElementsByName(a)[0])?(n=r(u),y(W,"Moving to in page link (#"+t+") at x: "+n.x+" y: "+n.y),c={x:n.x,y:n.y},l(),y(W,"--")):window.top!==window.self?window.parentIFrame?window.parentIFrame.moveToAnchor(t):y(W,"In page link #"+t+" not found and window.parentIFrame not found"):y(W,"In page link #"+t+" not found");break;case"reset":R(P);break;case"init":e(),h("onInit",P.iframe);break;default:0===Number(P.width)&&0===Number(P.height)?k("Unsupported message received ("+P.type+"), this is likely due to the iframe containing a later version of iframe-resizer than the parent page"):e()}var n,t,a,u,s}())):T(W,"Ignored: "+L)}function S(n,e,t){var i=null,o=null;if(f[n]){if("function"!=typeof(i=f[n][e]))throw new TypeError(e+" on iFrame["+n+"] is not a function");o=i(t)}return o}function z(n){delete f[n.id]}function O(n){var e=n.id;if(!1!==S(e,"onClose",e)){y(e,"Removing iFrame: "+e);try{n.parentNode&&n.parentNode.removeChild(n)}catch(n){k(n)}S(e,"onClosed",e),y(e,"--"),z(n)}else y(e,"Close iframe cancelled by onClose event")}function N(n){null===c&&y(n,"Get page position: "+(c={x:window.pageXOffset!==e?window.pageXOffset:document.documentElement.scrollLeft,y:window.pageYOffset!==e?window.pageYOffset:document.documentElement.scrollTop}).x+","+c.y)}function x(n){null!==c&&(window.scrollTo(c.x,c.y),y(n,"Set page position: "+c.x+","+c.y),E())}function E(){c=null}function R(n){y(n.id,"Size reset requested by "+("init"===n.type?"host page":"iFrame")),N(n.id),F((function(){C(n),A("reset","reset",n.iframe,n.id)}),n,"reset")}function C(n){function e(e){r||"0"!==n[e]||(r=!0,y(i,"Hidden iFrame detected, creating visibility listener"),function(){function n(){Object.keys(f).forEach((function(n){!function(n){function e(e){return"0px"===(f[n]&&f[n].iframe.style[e])}f[n]&&null!==f[n].iframe.offsetParent&&(e("height")||e("width"))&&A("Visibility change","resize",f[n].iframe,n)}(n)}))}function e(e){y("window","Mutation observed: "+e[0].target+" "+e[0].type),L(n,16)}var t,i=g();i&&(t=document.querySelector("body"),new i(e).observe(t,{attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0}))}())}function t(t){!function(e){n.id?(n.iframe.style[e]=n[e]+"px",y(n.id,"IFrame ("+i+") "+e+" set to "+n[e]+"px")):y("undefined","messageData id not set")}(t),e(t)}var i=n.iframe.id;f[i]&&(f[i].sizeHeight&&t("height"),f[i].sizeWidth&&t("width"))}function F(n,e,t){t!==e.type&&d&&!window.jasmine?(y(e.id,"Requesting animation frame"),d(n)):n()}function A(n,e,t,i,o){var r,a=!1;f[i=i||t.id]&&(t&&"contentWindow"in t&&null!==t.contentWindow?(y(i,"["+n+"] Sending msg to iframe["+i+"] ("+e+") targetOrigin: "+(r=f[i]&&f[i].targetOrigin)),t.contentWindow.postMessage(u+e,r)):k(i,"["+n+"] IFrame("+i+") not found"),o&&f[i]&&f[i].warningTimeout&&(f[i].msgTimeout=setTimeout((function(){!f[i]||f[i].loaded||a||(a=!0,k(i,"IFrame has not responded within "+f[i].warningTimeout/1e3+" seconds. Check iFrameResizer.contentWindow.js has been loaded in iFrame. This message can be ignored if everything is working, or you can set the warningTimeout option to a higher value or zero to suppress this warning."))}),f[i].warningTimeout)))}function H(n){return n+":"+f[n].bodyMarginV1+":"+f[n].sizeWidth+":"+f[n].log+":"+f[n].interval+":"+f[n].enablePublicMethods+":"+f[n].autoResize+":"+f[n].bodyMargin+":"+f[n].heightCalculationMethod+":"+f[n].bodyBackground+":"+f[n].bodyPadding+":"+f[n].tolerance+":"+f[n].inPageLinks+":"+f[n].resizeFrom+":"+f[n].widthCalculationMethod+":"+f[n].mouseEvents}function j(n,t){function r(n){var e=n.split("Callback");if(2===e.length){var t="on"+e[0].charAt(0).toUpperCase()+e[0].slice(1);this[t]=this[n],delete this[n],k(s,"Deprecated: '"+n+"' has been renamed '"+t+"'. The old method will be removed in the next major version.")}}var a,u,s=function(e){var r;return""===e&&(n.id=(r=t&&t.id||h.id+i++,null!==document.getElementById(r)&&(r+=i++),e=r),o=(t||{}).log,y(e,"Added missing iframe ID: "+e+" ("+n.src+")")),e}(n.id);s in f&&"iFrameResizer"in n?k(s,"Ignored iFrame, already setup."):(function(e){var t;e=e||{},f[s]={firstRun:!0,iframe:n,remoteHost:n.src&&n.src.split("/").slice(0,3).join("/")},function(n){if("object"!=typeof n)throw new TypeError("Options is not an object")}(e),Object.keys(e).forEach(r,e),function(n){for(var e in h)Object.prototype.hasOwnProperty.call(h,e)&&(f[s][e]=Object.prototype.hasOwnProperty.call(n,e)?n[e]:h[e])}(e),f[s]&&(f[s].targetOrigin=!0===f[s].checkOrigin?""===(t=f[s].remoteHost)||null!==t.match(/^(about:blank|javascript:|file:\/\/)/)?"*":t:"*")}(t),function(){switch(y(s,"IFrame scrolling "+(f[s]&&f[s].scrolling?"enabled":"disabled")+" for "+s),n.style.overflow=!1===(f[s]&&f[s].scrolling)?"hidden":"auto",f[s]&&f[s].scrolling){case"omit":break;case!0:n.scrolling="yes";break;case!1:n.scrolling="no";break;default:n.scrolling=f[s]?f[s].scrolling:"no"}}(),function(){function e(e){var t=f[s][e];1/0!==t&&0!==t&&(n.style[e]="number"==typeof t?t+"px":t,y(s,"Set "+e+" = "+n.style[e]))}function t(n){if(f[s]["min"+n]>f[s]["max"+n])throw new Error("Value for min"+n+" can not be greater than max"+n)}t("Height"),t("Width"),e("maxHeight"),e("minHeight"),e("maxWidth"),e("minWidth")}(),"number"!=typeof(f[s]&&f[s].bodyMargin)&&"0"!==(f[s]&&f[s].bodyMargin)||(f[s].bodyMarginV1=f[s].bodyMargin,f[s].bodyMargin=f[s].bodyMargin+"px"),a=H(s),(u=g())&&function(e){n.parentNode&&new e((function(e){e.forEach((function(e){Array.prototype.slice.call(e.removedNodes).forEach((function(e){e===n&&O(n)}))}))})).observe(n.parentNode,{childList:!0})}(u),p(n,"load",(function(){A("iFrame.onload",a,n,e,!0),(!f[s]||!f[s].firstRun)&&f[s]&&f[s].heightCalculationMethod in l&&R({iframe:n,height:0,width:0,type:"init"})})),A("init",a,n,e,!0),f[s]&&(f[s].iframe.iFrameResizer={close:O.bind(null,f[s].iframe),removeListeners:z.bind(null,f[s].iframe),resize:A.bind(null,"Window resize","resize",f[s].iframe),moveToAnchor:function(n){A("Move to anchor","moveToAnchor:"+n,f[s].iframe,s)},sendMessage:function(n){A("Send Message","message:"+(n=JSON.stringify(n)),f[s].iframe,s)}}))}function L(n,e){null===m&&(m=setTimeout((function(){m=null,n()}),e))}function P(){"hidden"!==document.visibilityState&&(y("document","Trigger event: Visiblity change"),L((function(){W("Tab Visable","resize")}),16))}function W(n,e){Object.keys(f).forEach((function(t){(function(n){return f[n]&&"parent"===f[n].resizeFrom&&f[n].autoResize&&!f[n].firstRun})(t)&&A(n,e,f[t].iframe,t)}))}function D(){function n(n,e){e&&(function(){if(!e.tagName)throw new TypeError("Object is not a valid DOM element");if("IFRAME"!==e.tagName.toUpperCase())throw new TypeError("Expected <IFRAME> tag, found <"+e.tagName+">")}(),j(e,n),t.push(e))}var t;return function(){var n,e=["moz","webkit","o","ms"];for(n=0;n<e.length&&!d;n+=1)d=window[e[n]+"RequestAnimationFrame"];d?d=d.bind(window):y("setup","RequestAnimationFrame not supported")}(),p(window,"message",M),p(window,"resize",(function(){y("window","Trigger event: resize"),L((function(){W("Window resize","resize")}),16)})),p(document,"visibilitychange",P),p(document,"-webkit-visibilitychange",P),function(i,o){switch(t=[],function(n){n&&n.enablePublicMethods&&k("enablePublicMethods option has been removed, public methods are now always available in the iFrame")}(i),typeof o){case"undefined":case"string":Array.prototype.forEach.call(document.querySelectorAll(o||"iframe"),n.bind(e,i));break;case"object":n(i,o);break;default:throw new TypeError("Unexpected data type ("+typeof o+")")}return t}}}()})),v={iframeResize:p,iframeResizer:p,iframeResizerContentWindow:d((function(n){!function(e){if("undefined"!=typeof window){var t=!0,i="",o=0,r="",a=null,u="",s=!1,c={resize:1,click:1},d=128,l=!0,f=1,m="bodyOffset",h=m,w=!0,g="",p={},v=32,b=null,y=!1,T=!1,k="[iFrameSizer]",I=k.length,M="",S={max:1,min:1,bodyScroll:1,documentElementScroll:1},z="child",O=window.parent,N="*",x=0,E=!1,R=null,C=16,F=1,A="scroll",H=A,j=window,L=function(){an("onMessage function not defined")},P=function(){},W=function(){},D={height:function(){return an("Custom height calculation function not defined"),document.documentElement.offsetHeight},width:function(){return an("Custom width calculation function not defined"),document.body.scrollWidth}},_={},q=!1;try{var U=Object.create({},{passive:{get:function(){q=!0}}});window.addEventListener("test",nn,U),window.removeEventListener("test",nn,U)}catch(n){}var J,V,B,Q,$,K,G,X={bodyOffset:function(){return document.body.offsetHeight+gn("marginTop")+gn("marginBottom")},offset:function(){return X.bodyOffset()},bodyScroll:function(){return document.body.scrollHeight},custom:function(){return D.height()},documentElementOffset:function(){return document.documentElement.offsetHeight},documentElementScroll:function(){return document.documentElement.scrollHeight},max:function(){return Math.max.apply(null,vn(X))},min:function(){return Math.min.apply(null,vn(X))},grow:function(){return X.max()},lowestElement:function(){return Math.max(X.bodyOffset()||X.documentElementOffset(),pn("bottom",yn()))},taggedElement:function(){return bn("bottom","data-iframe-height")}},Y={bodyScroll:function(){return document.body.scrollWidth},bodyOffset:function(){return document.body.offsetWidth},custom:function(){return D.width()},documentElementScroll:function(){return document.documentElement.scrollWidth},documentElementOffset:function(){return document.documentElement.offsetWidth},scroll:function(){return Math.max(Y.bodyScroll(),Y.documentElementScroll())},max:function(){return Math.max.apply(null,vn(Y))},min:function(){return Math.min.apply(null,vn(Y))},rightMostElement:function(){return pn("right",yn())},taggedElement:function(){return bn("right","data-iframe-width")}},Z=(J=Tn,$=null,K=0,G=function(){K=Date.now(),$=null,Q=J.apply(V,B),$||(V=B=null)},function(){var n=Date.now();K||(K=n);var e=C-(n-K);return V=this,B=arguments,e<=0||e>C?($&&(clearTimeout($),$=null),K=n,Q=J.apply(V,B),$||(V=B=null)):$||($=setTimeout(G,e)),Q});en(window,"message",(function(c){var f,m={init:function(){var n,f,m;g=c.data,O=c.source,function(){function n(n){return"true"===n}var a=g.substr(I).split(":");M=a[0],o=e!==a[1]?Number(a[1]):o,s=e!==a[2]?n(a[2]):s,y=e!==a[3]?n(a[3]):y,v=e!==a[4]?Number(a[4]):v,t=e!==a[6]?n(a[6]):t,r=a[7],h=e!==a[8]?a[8]:h,i=a[9],u=a[10],x=e!==a[11]?Number(a[11]):x,p.enable=e!==a[12]&&n(a[12]),z=e!==a[13]?a[13]:z,H=e!==a[14]?a[14]:H,T=e!==a[15]?Boolean(a[15]):T}(),rn("Initialising iFrame ("+window.location.href+")"),function(){function n(){var n=window.iFrameResizer;rn("Reading data from page: "+JSON.stringify(n)),Object.keys(n).forEach(un,n),L="onMessage"in n?n.onMessage:L,P="onReady"in n?n.onReady:P,N="targetOrigin"in n?n.targetOrigin:N,h="heightCalculationMethod"in n?n.heightCalculationMethod:h,H="widthCalculationMethod"in n?n.widthCalculationMethod:H}function e(n,e){return"function"==typeof n&&(rn("Setup custom "+e+"CalcMethod"),D[e]=n,n="custom"),n}"iFrameResizer"in window&&Object===window.iFrameResizer.constructor&&(n(),h=e(h,"height"),H=e(H,"width")),rn("TargetOrigin for parent set to: "+N)}(),e===r&&(r=o+"px"),sn("margin",(f="margin",-1!==(m=r).indexOf("-")&&(an("Negative CSS value ignored for "+f),m=""),m)),sn("background",i),sn("padding",u),(n=document.createElement("div")).style.clear="both",n.style.display="block",n.style.height="0",document.body.appendChild(n),fn(),mn(),document.documentElement.style.height="",document.body.style.height="",rn('HTML & body height set to "auto"'),rn("Enable public methods"),j.parentIFrame={autoResize:function(n){return!0===n&&!1===t?(t=!0,hn()):!1===n&&!0===t&&(t=!1,dn("remove"),null!==a&&a.disconnect(),clearInterval(b)),zn(0,0,"autoResize",JSON.stringify(t)),t},close:function(){zn(0,0,"close")},getId:function(){return M},getPageInfo:function(n){"function"==typeof n?(W=n,zn(0,0,"pageInfo")):(W=function(){},zn(0,0,"pageInfoStop"))},moveToAnchor:function(n){p.findTarget(n)},reset:function(){Sn("parentIFrame.reset")},scrollTo:function(n,e){zn(e,n,"scrollTo")},scrollToOffset:function(n,e){zn(e,n,"scrollToOffset")},sendMessage:function(n,e){zn(0,0,"message",JSON.stringify(n),e)},setHeightCalculationMethod:function(n){h=n,fn()},setWidthCalculationMethod:function(n){H=n,mn()},setTargetOrigin:function(n){rn("Set targetOrigin: "+n),N=n},size:function(n,e){kn("size","parentIFrame.size("+(n||"")+(e?","+e:"")+")",n,e)}},function(){function n(n){zn(0,0,n.type,n.screenY+":"+n.screenX)}function e(e,t){rn("Add event listener: "+t),en(window.document,e,n)}!0===T&&(e("mouseenter","Mouse Enter"),e("mouseleave","Mouse Leave"))}(),hn(),p=function(){function n(){return{x:window.pageXOffset!==e?window.pageXOffset:document.documentElement.scrollLeft,y:window.pageYOffset!==e?window.pageYOffset:document.documentElement.scrollTop}}function t(e){var t=e.getBoundingClientRect(),i=n();return{x:parseInt(t.left,10)+parseInt(i.x,10),y:parseInt(t.top,10)+parseInt(i.y,10)}}function i(n){function i(n){var e=t(n);rn("Moving to in page link (#"+o+") at x: "+e.x+" y: "+e.y),zn(e.y,e.x,"scrollToOffset")}var o=n.split("#")[1]||n,r=decodeURIComponent(o),a=document.getElementById(r)||document.getElementsByName(r)[0];e!==a?i(a):(rn("In page link (#"+o+") not found in iFrame, so sending to parent"),zn(0,0,"inPageLink","#"+o))}function o(){var n=window.location.hash,e=window.location.href;""!==n&&"#"!==n&&i(e)}function r(){function n(n){function e(n){n.preventDefault(),i(this.getAttribute("href"))}"#"!==n.getAttribute("href")&&en(n,"click",e)}Array.prototype.forEach.call(document.querySelectorAll('a[href^="#"]'),n)}function a(){en(window,"hashchange",o)}function u(){setTimeout(o,d)}function s(){Array.prototype.forEach&&document.querySelectorAll?(rn("Setting up location.hash handlers"),r(),a(),u()):an("In page linking not fully supported in this browser! (See README.md for IE8 workaround)")}return p.enable?s():rn("In page linking not enabled"),{findTarget:i}}(),kn("init","Init message from host page"),P(),l=!1,setTimeout((function(){w=!1}),d)},reset:function(){w?rn("Page reset ignored by init"):(rn("Page size reset by host page"),Mn("resetPage"))},resize:function(){kn("resizeParent","Parent window requested size check")},moveToAnchor:function(){p.findTarget(E())},inPageLink:function(){this.moveToAnchor()},pageInfo:function(){var n=E();rn("PageInfoFromParent called from parent: "+n),W(JSON.parse(n)),rn(" --")},message:function(){var n=E();rn("onMessage called from parent: "+n),L(JSON.parse(n)),rn(" --")}};function S(){return c.data.split("]")[1].split(":")[0]}function E(){return c.data.substr(c.data.indexOf(":")+1)}function R(){return c.data.split(":")[2]in{true:1,false:1}}k===(""+c.data).substr(0,I)&&(!1===l?(f=S())in m?m[f]():!n.exports&&"iFrameResize"in window||"jQuery"in window&&"iFrameResize"in window.jQuery.prototype||R()||an("Unexpected message ("+c.data+")"):R()?m.init():rn('Ignored message of type "'+S()+'". Received before initialization.'))})),en(window,"readystatechange",On),On()}function nn(){}function en(n,e,t,i){n.addEventListener(e,t,!!q&&(i||{}))}function tn(n){return n.charAt(0).toUpperCase()+n.slice(1)}function on(n){return k+"["+M+"] "+n}function rn(n){y&&"object"==typeof window.console&&console.log(on(n))}function an(n){"object"==typeof window.console&&console.warn(on(n))}function un(n){var e=n.split("Callback");if(2===e.length){var t="on"+e[0].charAt(0).toUpperCase()+e[0].slice(1);this[t]=this[n],delete this[n],an("Deprecated: '"+n+"' has been renamed '"+t+"'. The old method will be removed in the next major version.")}}function sn(n,t){e!==t&&""!==t&&"null"!==t&&(document.body.style[n]=t,rn("Body "+n+' set to "'+t+'"'))}function cn(n){var e={add:function(e){function t(){kn(n.eventName,n.eventType)}_[e]=t,en(window,e,t,{passive:!0})},remove:function(n){var e=_[n];delete _[n],window.removeEventListener(n,e,!1)}};n.eventNames&&Array.prototype.map?(n.eventName=n.eventNames[0],n.eventNames.map(e[n.method])):e[n.method](n.eventName),rn(tn(n.method)+" event listener: "+n.eventType)}function dn(n){cn({method:n,eventType:"Animation Start",eventNames:["animationstart","webkitAnimationStart"]}),cn({method:n,eventType:"Animation Iteration",eventNames:["animationiteration","webkitAnimationIteration"]}),cn({method:n,eventType:"Animation End",eventNames:["animationend","webkitAnimationEnd"]}),cn({method:n,eventType:"Input",eventName:"input"}),cn({method:n,eventType:"Mouse Up",eventName:"mouseup"}),cn({method:n,eventType:"Mouse Down",eventName:"mousedown"}),cn({method:n,eventType:"Orientation Change",eventName:"orientationchange"}),cn({method:n,eventType:"Print",eventName:["afterprint","beforeprint"]}),cn({method:n,eventType:"Ready State Change",eventName:"readystatechange"}),cn({method:n,eventType:"Touch Start",eventName:"touchstart"}),cn({method:n,eventType:"Touch End",eventName:"touchend"}),cn({method:n,eventType:"Touch Cancel",eventName:"touchcancel"}),cn({method:n,eventType:"Transition Start",eventNames:["transitionstart","webkitTransitionStart","MSTransitionStart","oTransitionStart","otransitionstart"]}),cn({method:n,eventType:"Transition Iteration",eventNames:["transitioniteration","webkitTransitionIteration","MSTransitionIteration","oTransitionIteration","otransitioniteration"]}),cn({method:n,eventType:"Transition End",eventNames:["transitionend","webkitTransitionEnd","MSTransitionEnd","oTransitionEnd","otransitionend"]}),"child"===z&&cn({method:n,eventType:"IFrame Resized",eventName:"resize"})}function ln(n,e,t,i){return e!==n&&(n in t||(an(n+" is not a valid option for "+i+"CalculationMethod."),n=e),rn(i+' calculation method set to "'+n+'"')),n}function fn(){h=ln(h,m,X,"height")}function mn(){H=ln(H,A,Y,"width")}function hn(){!0===t?(dn("add"),window.MutationObserver||window.WebKitMutationObserver?0>v?wn():a=function(){function n(n){function e(n){!1===n.complete&&(rn("Attach listeners to "+n.src),n.addEventListener("load",i,!1),n.addEventListener("error",o,!1),a.push(n))}"attributes"===n.type&&"src"===n.attributeName?e(n.target):"childList"===n.type&&Array.prototype.forEach.call(n.target.querySelectorAll("img"),e)}function e(n){rn("Remove listeners from "+n.src),n.removeEventListener("load",i,!1),n.removeEventListener("error",o,!1),function(n){a.splice(a.indexOf(n),1)}(n)}function t(n,t,i){e(n.target),kn(t,i+": "+n.target.src)}function i(n){t(n,"imageLoad","Image loaded")}function o(n){t(n,"imageLoadFailed","Image load failed")}function r(e){kn("mutationObserver","mutationObserver: "+e[0].target+" "+e[0].type),e.forEach(n)}var a=[],u=window.MutationObserver||window.WebKitMutationObserver,s=function(){var n=document.querySelector("body");return s=new u(r),rn("Create body MutationObserver"),s.observe(n,{attributes:!0,attributeOldValue:!1,characterData:!0,characterDataOldValue:!1,childList:!0,subtree:!0}),s}();return{disconnect:function(){"disconnect"in s&&(rn("Disconnect body MutationObserver"),s.disconnect(),a.forEach(e))}}}():(rn("MutationObserver not supported in this browser!"),wn())):rn("Auto Resize disabled")}function wn(){0!==v&&(rn("setInterval: "+v+"ms"),b=setInterval((function(){kn("interval","setInterval: "+v)}),Math.abs(v)))}function gn(n,e){var t=0;return e=e||document.body,t=null!==(t=document.defaultView.getComputedStyle(e,null))?t[n]:0,parseInt(t,10)}function pn(n,e){for(var t=e.length,i=0,o=0,r=tn(n),a=Date.now(),u=0;u<t;u++)(i=e[u].getBoundingClientRect()[n]+gn("margin"+r,e[u]))>o&&(o=i);return a=Date.now()-a,rn("Parsed "+t+" HTML elements"),rn("Element position calculated in "+a+"ms"),function(n){n>C/2&&rn("Event throttle increased to "+(C=2*n)+"ms")}(a),o}function vn(n){return[n.bodyOffset(),n.bodyScroll(),n.documentElementOffset(),n.documentElementScroll()]}function bn(n,e){var t=document.querySelectorAll("["+e+"]");return 0===t.length&&(an("No tagged elements ("+e+") found on page"),document.querySelectorAll("body *")),pn(n,t)}function yn(){return document.querySelectorAll("body *")}function Tn(n,t,i,o){var r,a;!function(){function n(n,e){return!(Math.abs(n-e)<=x)}return r=e!==i?i:X[h](),a=e!==o?o:Y[H](),n(f,r)||s&&n(F,a)}()&&"init"!==n?!(n in{init:1,interval:1,size:1})&&(h in S||s&&H in S)?Sn(t):n in{interval:1}||rn("No change in size detected"):(In(),zn(f=r,F=a,n))}function kn(n,e,t,i){E&&n in c?rn("Trigger event cancelled: "+n):(n in{reset:1,resetPage:1,init:1}||rn("Trigger event: "+e),"init"===n?Tn(n,e,t,i):Z(n,e,t,i))}function In(){E||(E=!0,rn("Trigger event lock on")),clearTimeout(R),R=setTimeout((function(){E=!1,rn("Trigger event lock off"),rn("--")}),d)}function Mn(n){f=X[h](),F=Y[H](),zn(f,F,n)}function Sn(n){var e=h;h=m,rn("Reset trigger event: "+n),In(),Mn("reset"),h=e}function zn(n,t,i,o,r){var a;e===r?r=N:rn("Message targetOrigin: "+r),rn("Sending message to host page ("+(a=M+":"+n+":"+t+":"+i+(e!==o?":"+o:""))+")"),O.postMessage(k+a,r)}function On(){"loading"!==document.readyState&&window.parent.postMessage("[iFrameResizerChild]Ready","*")}}()}))};const b=class{constructor(e){n(this,e)}async componentWillLoad(){this.href=await h()}componentDidLoad(){v.iframeResizer({checkOrigin:!1,onMessage(n){"updateCart"===n.message.type&&w(null).catch((n=>{throw n}))}},this.iframe)}render(){return e(t,null,e("iframe",{ref:n=>this.iframe=n,src:this.href,frameBorder:0,style:{width:"1px","min-width":"100%","min-height":"100%",overflow:"hidden"},scrolling:"no"}))}get host(){return i(this)}},y=class{constructor(e){n(this,e)}async componentWillLoad(){await w(null)}cartUpdateHandler(n){this.count=void 0!==n.detail.skus_count&&n.detail.skus_count>0?n.detail.skus_count:void 0}render(){return e(t,{quantity:this.count},this.count)}},T=class{constructor(e){n(this,e),this.target="_self"}async componentWillLoad(){this.href=await h()}async handleClick(n){void 0!==this.href&&m(this.href)||(n.preventDefault(),this.href=await h(!0),window.open(this.href,this.target))}async cartUpdateHandler(n){void 0!==this.href&&m(this.href)||(this.href=await h())}render(){return e("a",{target:this.target,href:this.href,onClick:n=>{this.handleClick(n).catch((n=>{throw n}))}},e("slot",null))}get host(){return i(this)}},k=class{constructor(e){n(this,e)}logSku(n){this.validateSku(n)||c("warn",'"sku" should be a not string.',this.host)}validateSku(n){return"string"==typeof n&&""!==n}componentWillLoad(){this.logSku(this.sku)}watchPropHandler(n,e){this.logSku(n)}priceUpdateHandler({type:n,detail:e}){this.host.querySelectorAll("cl-price-amount").forEach((t=>{t.dispatchEvent(new CustomEvent(n,{detail:e}))}))}render(){return e("slot",null)}get host(){return i(this)}static get watchers(){return{sku:["watchPropHandler"]}}},I=class{constructor(e){n(this,e),this.type="price"}priceUpdateHandler(n){switch(this.type){case"compare-at":this.price=n.detail.formatted_compare_at_amount;break;case"price":this.price=n.detail.formatted_amount}}render(){return e(t,null,"compare-at"===this.type?e("s",{part:"strikethrough"},this.price):this.price)}};export{g as cl_add_to_cart,b as cl_cart,y as cl_cart_count,T as cl_cart_link,k as cl_price,I as cl_price_amount}