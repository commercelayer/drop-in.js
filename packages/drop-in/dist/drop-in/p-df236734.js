import{l as c,u as i,i as t,c as e,a as n,g as r}from"./p-accd036a.js";function s(c){return c.sku}const a=async(n,r=Array.from(document.querySelectorAll("cl-price")))=>{await customElements.whenDefined("cl-price"),c("group","registerPrices invoked"),c("info","found",r.length,"cl-price");const a=i(r.map(s).filter(t));c("info","found",a.length,"unique skus",a);const o=e(a,25),u=(await Promise.all(o.map((async c=>await n.prices.list({pageSize:25,filters:{sku_code_in:c.join(",")}}))))).flat().reduce(((c,i)=>(void 0!==i.sku_code&&(c[i.sku_code]=i),c)),{});r.forEach((c=>{const i=s(c);if(void 0!==i){const t=u[i];null!=t&&c.dispatchEvent(new CustomEvent("priceUpdate",{detail:t}))}})),c("groupEnd")},o={"cl-price":function(c){return"cl-price"===c.nodeName.toLowerCase()}},u=async function(){const c=await n(r());await a(c),new MutationObserver((i=>{const t=i.reduce(((c,i)=>("childList"===i.type&&Object.keys(o).forEach((t=>{c[t].push(...Array.from(i.addedNodes).filter(o[t])),c[t].push(...Array.from(i.addedNodes).flatMap((c=>Array.from(c.querySelectorAll(t)))))})),c)),{"cl-price":[]});a(c,t["cl-price"]).catch((c=>{throw c}))})).observe(document.body,{childList:!0,subtree:!0})};export{u as i}